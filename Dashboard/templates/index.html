<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>The Platinum Lyric Project</title>
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
  <link
  rel="stylesheet"
  href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
  integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
  crossorigin="anonymous"
  />
  <link rel="stylesheet" href="static/css/style.css">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

</head>

<body class="bg-dark">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 jumbotron text-center jumbotron-fluid">
        <h1 class="display-4">The Platinum Lyric Project</h1>
        <p class="lead">Use the interactive charts below to explore the dataset</p>
        <!-- <h3 class="text-muted">Use the interactive charts below to explore the dataset</h3> -->
      </div>
    </div>

    <div class="row row-title pl-5">
      <div class="col-md-7">
        <h2>Enter song lyrics below to find out if it will be a hit or not</h2>
      </div>
      <div class="col-md-5">
      </div>
    </div>
    <hr class="my-4">

    <div class="row pb-4">

      <div class="col-md-6 pl-5">
        <form>
          <div class="form-group">
            <textarea class="form-control form-control-lg" id="lyricsInput" rows="9" placeholder="Enter song lyrics here" onchange="getText()"></textarea>
            <script type="text/javascript">
              function getText() {
                // Get user input and replace line breaks with spaces
                var lyrics = document.getElementById("lyricsInput").value.replace(/\n/g, " ");

                d3.json("http://127.0.0.1:5000/lyrics/"+lyrics).then(function(data) {
                  console.log(data)
                });
                // d3.json("http://127.0.0.1:5000/lyrics/"+lyrics, {
                // method:"GET",
                // body: JSON.stringify(lyrics)
                // })
                // return lyrics
              };

              // d3.select("#runModel").on("click", function() {
                // d3.select("#lyricsInput").style("background-color", "blue")
              // });
            </script>
          </div>
        </form>
      </div>
      
      <div class="col-md-3">
        <div class="form-group">
          <!-- <form action="http://localhost:5000/genre" method="POST"> -->
            <select class="form-control" id="genreSelect" placeholder="Select Genre" onchange="genreChanged(this.value)">
            <!-- <select class="form-control" name="selectGenre" id="genreSelect" placeholder="Select Genre"> -->
              <option selected>Select genre</option>
              <option>Rock</option>
              <option>Pop</option>
              <option>Country</option>
              <option>Something Else</option>
            </select>
          <!-- </form> -->
          <script type="text/javascript">
            function genreChanged(userOption) {
              d3.json("http://127.0.0.1:5000/genre/"+userOption).then(function(data) {
                  console.log(data)
                });
            };
          </script>
        </div>
        <div class="form-group">
          <select class="form-control" id="somethingElseSelect" placeholder="Select Genre">
            <option selected>Select Something Else</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
          </select>
        </div>
        <form action="http://localhost:5000/runmodel" method="post">
          <input type="submit" class="btn btn-secondary btn-block" id="runModel" value="Run" style="border-radius: 20px"/>
        </form>

        <!-- <script type="text/javascript">
          $.ajax({
            type : "POST",
            url : '/runmodel',
            dataType: "json",
            data: JSON.stringify(this.value),
            contentType: 'application/json;charset=UTF-8',
            success: function (data) {
              console.log(data);
              }
            });
        </script> -->
      </div>

      <div class="col-md-3 pr-5">
        {% if prediction==1 %}
        <div class="alert alert-success" role="alert">
          <h4 class="alert-heading">This song will be a Hit!</h4>
          <hr>
          <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
          <button type="button" class="btn btn-secondary" style="border-radius: 20px">Test another one!</button>
        </div>
        {% elif prediction==0 %}
        <div class="alert alert-warning" role="alert">
          <h4 class="alert-heading">This song will not be a Hit...</h4>
          <hr>
          <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
          <button type="button" class="btn btn-secondary" style="border-radius: 20px">Test another one!</button>
        </div>
        {% else %}
        <h4>Run the model to get your prediction</h4>
        {% endif %}
      </div>

    </div>

    <div class="row pl-5 pr-5 pt-4">
      
      <div class="col-md-6">
        <h3>Chart</h3>
        <div class="form-group">
          <!-- <form action="http://localhost:5000/genre" method="POST"> -->
            <select class="form-control" id="featureSelect" placeholder="Select Feature" onchange="featureChanged(this.value)">
            <!-- <select class="form-control" name="selectGenre" id="genreSelect" placeholder="Select Genre"> -->
              <option selected>Select feature</option>
              <option>mode</option>
              <option>acoustiness</option>
              <option>instrumentalness</option>
              <option>danceability</option>
              <option>energy</option>
              <option>liveness</option>
              <option>speechiness</option>
            </select>
          <!-- </form> -->
          <script type="text/javascript">
            function featureChanged(userOption) {
              d3.json("http://127.0.0.1:5000/feature_select/"+userOption).then(function(data) {
                  console.log(data)
                });
            };
          </script>
        </div>
        <div id="bargraph">
          <script type="text/javascript">
            var graphs = {{features_by_year_JSON | safe}};
            Plotly.plot('bargraph',graphs || {});
          </script>
        </div>
      </div>
    </div>

    <!-- <div class="row">

      <div class="col-md-2">
        <div class="well">
          <h5>Compare to year:</h5>
          <select id="selDataset" onchange="optionChanged(this.value)"></select>
        </div>
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title">Demographic Info</h3>
          </div>
          <div id="sample-metadata" class="panel-body"></div>
        </div>
      </div>

      <div class="col-md-5">
        <div id="bar"></div>
      </div>

      <div class="col-md-5">
        <div id="gauge"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div id="bubble"></div>
      </div>
    </div> -->

  </div>

</body>



</html>
